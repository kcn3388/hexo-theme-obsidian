<% if (theme.gitalk.enable == true) { %> <%-
css(['https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.5.0/gitalk.min.css'])%> <%-
js(['https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.5.0/gitalk.min.js'])%> <% } %> <%-
js(['https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js', 'https://res.kcn3388.club/hexo-theme-obsidian/src/js/plugin.js',
  'https://res.kcn3388.club/hexo-theme-obsidian/src/js/obsidian.js', 'https://res.kcn3388.club/hexo-theme-obsidian/src/js/jquery.truncate.js',
  'https://res.kcn3388.club/hexo-theme-obsidian/src/js/search.js'])%> <%-
js(['https://cdnjs.cloudflare.com/ajax/libs/typed.js/2.0.10/typed.min.js']) %> <%-
js(['https://cdnjs.cloudflare.com/ajax/libs/blueimp-md5/2.12.0/js/md5.min.js']) %> <%-
js(['https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js']) %>
<%- js(['https://res.kcn3388.club/hexo-theme-obsidian/src/js/title.js'])%>

<script src="https://cdnjs.cloudflare.com/codemirror/5.48.4/codemirror.min.js"></script>
<% theme.codemirror.modes.forEach(function (mode) { %> <%-
js(['https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/mode/' + mode + '/' + mode + '.min.js']) %> <% }) %> <% if
(theme.busuanzi.enable == true) { %> <%- js(['https://res.kcn3388.club/hexo-theme-obsidian/src/js/busuanzi.min.js']) %>
<script>
  $(document).ready(function () {
    if ($('span[id^="busuanzi_"]').length) {
      initialBusuanzi();
    }
  });
</script>
<% } %> <%- partial('photoswipe') %> <% if (theme.google_analytics) { %>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=<%- theme.google_analytics %>"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());

  gtag('config', '<%- theme.google_analytics %>');
</script>
<% } %> <% if (config.highlightjs) { %>
<!-- Highlight.js -->
<%- css(['css/dracula.css'])%>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', event => {
    document.querySelectorAll('pre code').forEach(block => {
      hljs.highlightBlock(block);
    });
  });
</script>
<% } %>

<script>
  function initialTyped() {
    var typedTextEl = $('.typed-text');
    if (typedTextEl && typedTextEl.length > 0) {
      var typed = new Typed('.typed-text', {
        strings: ['<%= theme.descriptionOne %>', '<%= theme.descriptionTwo %>', '<%= theme.descriptionThree%>', '<%= theme.descriptionFour%>'],
        typeSpeed: 90,
        loop: true,
        loopCount: Infinity,
        backSpeed: 20,
      });
    }
  }

  if ($('.article-header') && $('.article-header').length) {
    $(document).ready(function () {
      initialTyped();
    });
  }
</script>

<% if (theme.valine.enable) { %> <%- js(['https://unpkg.com/valine/dist/Valine.min.js']) %>
<script>
  var valine = new Valine();

  function initValine(path) {
    if (!path) path = window.location.pathname;
    let language = '<%- config.language %>';
    if (!language) {
      language = 'en';
    } else {
      language = language.toLowerCase();
    }
    valine.init({
      el: '#vcomments',
      appId: '<%- theme.valine.app_id %>',
      appKey: '<%- theme.valine.app_key %>',
      notify: '<%- theme.valine.notify %>',
      verify: '<%- theme.valine.verify %>',
      avatar: '<%- theme.valine.avatar %>',
      placeholder: '<%- theme.valine.placeholder %>',
      visitor: '<%- theme.valine.visitor %>',
      path: path,
      lang: language,
    });
  }

  $(document).ready(function () {
    initValine();
  });
</script>
<% } %>
<% if (theme.mouse_effect.enable) { %>
<%- js([theme.mouse_effect.file]) %>
<% } %>
<% if (theme.l2d.enable == true) { %>
  <%- js(['https://res.kcn3388.club/hexo-theme-obsidian/src/live2d-widget/autoload.js'])%>
<% } %>
<%- js(['https://res.kcn3388.club/hexo-theme-obsidian/src/js/hokusai.js'])%>